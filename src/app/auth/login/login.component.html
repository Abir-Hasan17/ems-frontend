<div class="h-full flex flex-row justify-center items-center bg-sky-200">
  <form
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    class="inline-flex flex-col px-5 pt-5 pb-6 overflow-hidden items-center gap-4 rounded-xl shadow-2xl shadow-gray-500 min-w-110 bg-white"
  >
    <div class="flex flex-col gap-0 items-center">
      <p class="text-sky-600 font-bold text-3xl m-0">Log in to ESM</p>
      <p class="m-0 text-sm font-thin">
        Keep track of your expense and get rich
      </p>
    </div>

    <div class="h-1"></div>

    <div class="inline-flex flex-col w-full">
      <mat-form-field appearance="outline">
        <mat-label>E-mail</mat-label>
        <input matInput formControlName="email" type="email" required />
        @if (form.get('email')?.touched && form.get('email')?.invalid) {
        <mat-error
          >@if (form.get('email')?.errors?.['required']) {
          <span>Email is required</span>
          } @if (form.get('email')?.errors?.['email']) {
          <span>Enter a valid email address</span>
          }</mat-error
        >
        }
      </mat-form-field>
    </div>

    <div class="inline-flex flex-col w-full">
      <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
        <input matInput formControlName="password" type="password" required />
        @if (form.get('password')?.touched && form.get('password')?.invalid) {
        <mat-error
          >@if (form.get('password')?.errors?.['required']) {
          <span>Password is required</span>
          } @if (form.get('password')?.errors?.['minlength']) {
          <span>Needs to be atleast 8 charracters</span>
          }</mat-error
        >
        }
      </mat-form-field>
    </div>

    @if(buttonState == loginButtonState.active){
    <button
      mat-flat-button
      type="submit"
      [disabled]="form.invalid && form.touched"
      class="w-full !rounded-md"
    >
      Login
    </button>
    } @else if (buttonState == loginButtonState.loading) {
    <span class="loader"></span>
    }

    <small class="font-thin text-gray-600"
      >Don't have an account?
      <a
        routerLink="/register"
        class="cursor-pointer text-blue-500 hover:underline"
        >Sign up</a
      >.</small
    >
  </form>
</div>
